---
import type { CollectionEntry } from "astro:content";
import { Image } from "astro:assets";

import { GridPattern } from "src/components/react";

interface Props {
  book: CollectionEntry<"books">;
}

const { book } = Astro.props;
---

<header class="relative z-10 overflow-hidden lg:bg-transparent">
  <div
    class="mx-auto grid max-w-6xl grid-cols-1 grid-rows-[auto_1fr] gap-y-16 pt-16 md:pt-20 lg:grid-cols-12 lg:gap-y-20 lg:px-3 lg:pb-16 lg:pt-20"
  >
    <div class="relative flex items-start lg:col-span-5 lg:row-span-2">
      <div
        class="rounded-br-6xl absolute z-10 mb-24 overflow-hidden rounded-br-3xl bg-blob-2 text-white/15 md:bottom-8 lg:-inset-y-32 lg:left-[-100vw] lg:right-full lg:-mr-40"
      >
        <GridPattern />
      </div>

      <div
        class="relative z-10 mx-auto flex aspect-[3/4] w-64 rounded-xl shadow-2xl shadow-black/15 md:w-80 lg:w-96"
      >
        <Image
          class="w-full rounded-xl object-cover"
          src={book.data.image}
          alt={book.data.title || ""}
        />
      </div>
    </div>

    <div
      class="pt-16 lg:col-span-7 lg:bg-transparent lg:pl-16 lg:pt-0 xl:pl-20"
    >
      <div
        class="mx-auto text-balance px-4 tracking-tight sm:px-6 md:max-w-2xl md:px-4 lg:px-0"
      >
        <h1
          class="font-display mb-8 text-5xl font-extrabold text-slate-900 sm:text-5xl"
        >
          {book.data.title}
        </h1>

        {book.data.headline && <p class="mb-6 text-lg">{book.data.headline}</p>}

        {
          book.data.link && (
            <div class="my-12 flex gap-4">
              <a
                href={book.data.link}
                target="_blank"
                class="rounded-md border border-white/50 bg-indigo-600 px-6 py-3 text-xl text-white shadow-lg shadow-indigo-500/25 hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600"
              >
                Загрузить книгу
              </a>
            </div>
          )
        }
      </div>
    </div>
  </div>
</header>
