---
import { getCollection } from "src/content";

import {
  // FeaturedBookHero,
  // Bookshelf,
  WritingsHero,
} from "src/components/astro";
import Layout from "src/layouts/SimpleWithNavigation.astro";

import { sample } from "src/utils";

const featuredBook = sample(
  (await getCollection("books")).filter(({entry}) => entry.isFeatured),
);
const books = (await getCollection(
  "books",
)).filter((entry) => entry.slug !== featuredBook?.slug);

const writings = await getCollection("writings");
writings.sort((a, b) =>
  b.entry.date === a.entry.date
    ? 0
    : (b.entry.date || "") < (a.entry.date || "")
      ? -1
      : 1,
);

const latestWritings = writings.slice(0, 3);
---

<Layout>
  <!-- <Hero
    data={{
      heroHeadline: "landingPage.heroHeadline",
      heroIntroText: "landingPage.heroIntroText",
    }}
  /> -->
  {latestWritings.length ? <WritingsHero writings={latestWritings} /> : null}
<!--
  {featuredBook && <FeaturedBookHero book={featuredBook} />}
  {books && <Bookshelf books={books} />} -->
</Layout>
